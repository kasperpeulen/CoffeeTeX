<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CoffeeTeX Unicode Editor</title>
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="js/PressAndHold/unicode2latex.js"></script>
  <script src="js/PressAndHold/plugins.js"></script>
  <script src="js/PressAndHold/longpress.js"></script>
  <script src="js/PressAndHold/app.js"></script>
  <script src="js/PressAndHold/textareahelper.js"></script>
  <script src="js/PressAndHold/tex_to_ctex.js"></script>
  <script src="js/PressAndHold/ctex_to_tex.js"></script>
  <script src="js/PressAndHold/tex_to_ctex.js"></script>
  <script src="js/PressAndHold/ctex_to_tex.js"></script>
  <script src="js/stmd.js"></script>
  <script type="text/javascript" src="js/mathjaxconfig.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML-full"></script>
  <script type="text/javascript">

    var writer = new stmd.HtmlRenderer();
    var reader = new stmd.DocParser();

    $(document).ready(function() {


      $(".timing").hide();
      var timer;
      var x;
      var parsed;
      var render = function() {
        if (parsed === undefined) {
          return;
        }

        var result = writer.renderBlock(parsed);
        $("#preview").html(result);
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, "preview"]);

        // $("#html").text(result);


       };
      var parseAndRender = function () {
        if (x) { x.abort() } // If there is an existing XHR, abort it.
        clearTimeout(timer); // Clear the timer so we don't end up with dupes.
        timer = setTimeout(function() { // assign timer a new timeout
          var startTime = new Date().getTime();
          tex_to_ctex();
          var endTime = new Date().getTime();
          var parseTime = endTime - startTime;
          startTime = new Date().getTime();
          ctex_to_tex();
          endTime = new Date().getTime();
          var renderTime = endTime - startTime;
          parsed = reader.parse($("#latex").text());

          $("#parsetime").text(parseTime);
          $("#rendertime").text(renderTime);
          $(".timing").show();
          /*
           var warnings = parsed.warnings;
           $("#warnings").html('');
           for (i=0; i < warnings.length; i++) {
           var w = warnings[i];
           var warning = $("#warnings").append('<li></li>');
           $("#warnings li").last().text('Line ' + w.line + ' column ' + w.column + ': ' + w.message);
           }
           */
          render();
        }, 10); // ms delay
      };
      $("#text").bind('keyup paste cut mouseup', parseAndRender);
      $(".option").change(render);
      parseAndRender();
    });
  </script>
  <link href="stylev1.css" rel="stylesheet"/>
  <script src="js/jquery.autosize.min.js"></script>
  <script>
    $(function(){
      $('#text').autosize();
    });
  </script>
</head>
<body>
<div class="container">
  <div class="row">
    <div class="col-md-6">
      <h1>CoffeeTeX</h1>
    </div>
    <div class="col-md-3">
      <ul class="nav nav-tabs" role="tablist">
        <li class="active"><a href="#preview" role="tab" data-toggle="tab">Preview</a></li>
        <li><a href="#result" role="tab" data-toggle="tab">LaTeX</a></li>
      </ul>
    </div>
    <div class="col-md-3">
      <p class="timing">LaTeX to Coffee TeX in <span class="timing" id="parsetime"></span> ms.<br/>
        Coffee TeX to LaTeX in <span class="timing" id="rendertime"></span> ms.</p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <textarea id="text" spellcheck='false'>**The Lorenz Equations**

â…xÌ‡ & = Ïƒ(y-x)         â†µ
 yÌ‡ & = Ïx - y - xz  â†µ
 zÌ‡ & = -Î²z + xyâ†

**The Cauchy-Schwarz Inequality**

â…ô€€¤âˆ‘â‚–â‚Œâ‚â¿ aâ‚–bâ‚–ô€€«Â² â‰¤ô€€¤âˆ‘â‚–â‚Œâ‚â¿ aâ‚–Â²ô€€«ô€€¤âˆ‘â‚–â‚Œâ‚â¿ bâ‚–Â²ô€€«â†

**A Cross Product Formula**

â…ğ•â‚ Ã—ğ•â‚‚ =
\begin{vmatrix}
ğ¢              &        ğ£       & ğ¤   â†µ
(âˆ‚X)âˆ•(âˆ‚u) &  (âˆ‚Y)âˆ•(âˆ‚u) & 0  â†µ
(âˆ‚X)âˆ•(âˆ‚v) &  (âˆ‚Y)âˆ•(âˆ‚v) & 0
\end{vmatrix}â†

**A Rogers-Ramanujan Identity**

â…1 +  (qÂ²)âˆ•[(1-q)] + (qâ¶)âˆ•[(1-q)(1-qÂ²)] + â‹¯ =
âˆâ‚™â‚Œâ‚€^âˆ 1âˆ•[(1-qâµâ¿âºÂ²)(1-qâµâ¿âºÂ³)],â€ƒâ€ƒ"for $|q|<1$".â†

**Maxwellâ€™s Equations**

â…âˆ‡Ã—ğâƒ— -â€‰ 1âˆ•câ€‰ (âˆ‚ğ„âƒ—)âˆ•(âˆ‚t) & = (4Ï€)âˆ•c ğ£âƒ— â†µ
âˆ‡â‹…ğ„âƒ— & = 4 Ï€Ï â†µ
âˆ‡Ã—ğ„âƒ—â€‰ +â€‰ 1âˆ•câ€‰ (âˆ‚ğâƒ—)âˆ•(âˆ‚t) & = \vec{\mathbf{0}} â†µ
âˆ‡â‹…ğâƒ— & = 0â†
      </textarea>
      <ul id="warnings"></ul>
    </div>
    <div class="col-md-6">
      <div class="tab-content">
        <div id="preview" class="tab-pane active">
        </div>
        <div id="result" class="tab-pane">
          <pre id="latexpre"><code id="latex"></code></pre>
        </div>

      </div>
    </div>
  </div>
  <input id="convert_latex" type="checkbox"> Convert LaTeX macros to unicode (experimental)<br>
</div>
</body>
</html>
